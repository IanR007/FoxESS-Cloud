{
  "name": "pv_update",
  "image": {
    "name": "saturn-python",
    "version": "2023.05.01",
    "owner": "saturncloud"
  },
  "description": "PV management job - uploads data to PV Output and works out battery charge schedule required",
  "environment_variables": {
    "CHARGE_PARAMS": "run_after=22"
  },
  "working_directory": "/home/jovyan/workspace",
  "extra_packages": {
    "pip": {
      "install": "random-user-agent foxesscloud"
    }
  },
  "start_script": "#! /usr/bin/bash\ncat > script.py <<EOF\n\nimport foxesscloud.foxesscloud as f\nprint(f\"foxesscloud version = {f.version}\")\n\nf.username = $FOX_USERNAME\nf.password = $FOX_PASSWORD\nf.device_sn = $FOX_DEVICE_SN\n\nf.pv_api_key = $PV_API_KEY\nf.pv_system_id = $PV_SYSTEM_ID\n\nf.solcast_api_key = $SOLCAST_API_KEY\nf.solcast_rids = $SOLCAST_RIDS\n\nf.set_pvoutput(tou=1, today=False)\nf.set_pvoutput(tou=1, today=True)\n\nf.charge_needed($CHARGE_PARAMS)\n\nEOF\n",
  "git_repositories": [],
  "shared_folders": [],
  "secrets": [
    {
      "location": "FOX_USERNAME",
      "type": "environment_variable",
      "description": "",
      "name": "FOX_USERNAME"
    },
    {
      "location": "FOX_PASSWORD",
      "type": "environment_variable",
      "description": "",
      "name": "FOX_PASSWORD"
    },
    {
      "location": "FOX_DEVICE_SN",
      "type": "environment_variable",
      "description": "",
      "name": "FOX_DEVICE_SN"
    },
    {
      "location": "PV_API_KEY",
      "type": "environment_variable",
      "description": "",
      "name": "PV_API_KEY"
    },
    {
      "location": "PV_SYSTEM_ID",
      "type": "environment_variable",
      "description": "",
      "name": "PV_SYSTEM_ID"
    },
    {
      "location": "SOLCAST_API_KEY",
      "type": "environment_variable",
      "description": "",
      "name": "SOLCAST_API_KEY"
    },
    {
      "location": "SOLCAST_RIDS",
      "type": "environment_variable",
      "description": "",
      "name": "SOLCAST_RIDS"
    }
  ],
  "job": {
    "instance_type": "medium",
    "command": "python script.py",
    "start_dind": false,
    "schedule": "5 8,12,16,20,22 * * *",
    "concurrency_policy": "Allow",
    "backoff_limit": 0
  },
  "owner": "TonyM1958",
  "schema_version": "2022.10.01"
}